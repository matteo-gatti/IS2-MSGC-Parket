<!DOCTYPE html>

<head>
  <title>Dettaglio Inserzione</title>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="img/logo.png" />
  <!-- JQuery-->
  <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous"></script>

  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
    crossorigin="anonymous"></script>

  <!-- Popperjs -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.2/dist/umd/popper.min.js"
    crossorigin="anonymous"></script>

  <!-- Tempus Dominus JavaScript -->
  <script src="https://cdn.jsdelivr.net/gh/Eonasdan/tempus-dominus@master/dist/js/tempus-dominus.js"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/gh/Eonasdan/tempus-dominus@master/dist/locales/it.js"
    crossorigin="anonymous"></script>

  <!-- Bootstrap-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
  <!-- ICONS -->

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/gh/Eonasdan/tempus-dominus@master/dist/css/tempus-dominus.css" rel="stylesheet"
    crossorigin="anonymous">
  <script src="scriptInsertion.js" defer></script>

  <style>
    .imgDetail {
      width: 80%;
      height: 33vw;
      object-fit: cover;
    }

    /* stile card utente */
    .imgDetail {
      width: 80%;
      height: 33vw;
      object-fit: cover;
    }

    body {
      background-color: #f9f9fa
    }

    .padding {
      padding-bottom: 2rem !important
    }

    .user-card-full {
      overflow: hidden;
    }

    .card {
      border-radius: 5px;
      -webkit-box-shadow: 0 1px 20px 0 rgba(69, 90, 100, 0.08);
      box-shadow: 0 1px 20px 0 rgba(69, 90, 100, 0.08);
      border: none;
    }

    .m-r-0 {
      margin-right: 0px;
    }

    .m-l-0 {
      margin-left: 0px;
    }

    .user-card-full .user-profile {
      border-radius: 5px 0 0 5px;
    }

    .bg-c-lite-green {
      background: -webkit-gradient(linear, left top, right top, from(#f29263), to(#ee5a6f));
      background: linear-gradient(to right, #5aaeee, #7163f2);
    }

    .user-profile {
      padding: 20px 0;
    }

    .card-block {
      padding: 1.25rem;
    }

    .m-b-25 {
      margin-bottom: 25px;
    }

    .img-radius {
      border-radius: 5px;
    }

    h6 {
      font-size: 14px;
    }

    .card .card-block p {
      line-height: 25px;
    }

    @media only screen and (min-width: 1400px) {
      p {
        font-size: 14px;
      }
    }

    .card-block {
      padding: 1.25rem;
    }

    .b-b-default {
      border-bottom: 1px solid #e0e0e0;
    }

    .m-b-20 {
      margin-bottom: 20px;
    }

    .p-b-5 {
      padding-bottom: 5px !important;
    }

    .card .card-block p {
      line-height: 25px;
    }

    .m-b-10 {
      margin-bottom: 10px;
    }

    .text-muted {
      color: #919aa3 !important;
    }

    .b-b-default {
      border-bottom: 1px solid #e0e0e0;
    }

    .f-w-600 {
      font-weight: 600;
    }

    .m-b-20 {
      margin-bottom: 20px;
    }

    .m-t-40 {
      margin-top: 20px;
    }

    .p-b-5 {
      padding-bottom: 5px !important;
    }

    .m-b-10 {
      margin-bottom: 10px;
    }

    .m-t-40 {
      margin-top: 20px;
    }

    .user-card-full .social-link li {
      display: inline-block;
    }

    .user-card-full .social-link li a {
      font-size: 20px;
      margin: 0 10px 0 0;
      -webkit-transition: all 0.3s ease-in-out;
      transition: all 0.3s ease-in-out;
    }
  </style>
</head>

<body>
  <%- include("./header.ejs", {logged: logged}) %>
    <!-- Page Content -->

    <div class="row">
      <div class="col-md-2">
        <div class="container mt-5" style="padding-left: 25%">
          <button class="btn btn-default btn-secondary mx-auto" onclick="goBack()">Torna indietro</button>
        </div>
      </div>

      <div class="col page-content page-container" id="page-content">
        <div class="padding">
          <div class="row d-flex justify-content-center align-content-center">
            <div class="col-md-12">
              <div class="card user-card-full">
                <div class="row m-l-0 m-r-0">
                  <div class="col-sm-3 bg-c-lite-green user-profile">
                    <div class="card-block text-center text-white">
                      <div class="m-b-25">
                        <img src="" class="img-rounded img" style="border-radius: 50%;object-fit:cover;" id="imgParking" alt="Parking Image"
                          width="150px" height="150px">
                      </div>
                      <h6 class="f-w-600" id="nameParking"></h6>
                      <p id="addressParking"></p>
                      <i class=" mdi mdi-square-edit-outline feather icon-edit m-t-10 f-16"></i>
                    </div>
                  </div>
                  <div class="col-sm-8">
                    <div class="card-block">
                      <h6 class="m-b-20 p-b-5 b-b-default f-w-600">Informazioni</h6>
                      <div class="row">
                        <div class="col-sm-4">
                          <p class="m-b-10 f-w-600">Nome:</p>
                          <h6 class="text-muted f-w-400" id="insertionName"></h6>
                        </div>
                        <div class="col-sm-4">
                          <p class="m-b-10 f-w-600">Da:</p>
                          <h6 class="text-muted f-w-400" id="insertionFrom"></h6>
                        </div>
                        <div class="col-sm-4">
                          <p class="m-b-10 f-w-600">A:</p>
                          <h6 class="text-muted f-w-400" id="insertionTo"></h6>
                        </div>
                        <div class="col-sm-4">
                          <p class="m-b-10 f-w-600">Intervallo minimo:</p>
                          <h6 class="text-muted f-w-400" id="insertionInterval"></h6>
                        </div>
                        <div class="col-sm-4">
                          <p class="m-b-10 f-w-600">Prezzo orario:</p>
                          <h6 class="text-muted f-w-400" id="insertionPriceH"></h6>
                        </div>
                        <div class="col-sm-4">
                          <p class="m-b-10 f-w-600">Prezzo giornaliero:</p>
                          <h6 class="text-muted f-w-400" id="insertionPriceD"></h6>
                        </div>
                        <div id="recurrenceContainer" class="col-sm-0" hidden>
                          <p class="m-b-10 f-w-600">Ricorrenza:</p>
                          <h6 class="text-muted f-w-400" id="insertionRecurrentDays"></h6>
                          <h6 class="text-muted f-w-400" id="insertionRecurrentHours"></h6>
                        </div>
                      </div>
                      <h6 class="m-b-20 m-t-40 p-b-5 b-b-default f-w-600">Prenotazioni</h6>
                      <h5 id="noReservations" class="text-center" hidden>Nessuna prenotazione 😭</h5>
                      <div class="col-sm-4 mb-3" id="reservTemplate" hidden>
                        <h6 class="d-inline">Cliente: </h6>
                        <span class='text-muted' id="reservationClient" style='font-size: 14px;'></span>
                        <br>
                        <h6 class="d-inline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Da: </h6>
                        <span class='text-muted' id="reservationFrom" style='font-size: 14px;'></span>
                        <br>
                        <h6 class='d-inline'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A: </h6>
                        <span class='text-muted' id="reservationTo" style='font-size: 14px;'></span>
                      </div>
                      <div class="row" id="reservList"></div>
                      <ul class="social-link list-unstyled m-t-40 m-b-10">
                        <li><a href="#!" data-toggle="tooltip" data-placement="bottom" title=""
                            data-original-title="facebook" data-abc="true"><i
                              class="mdi mdi-facebook feather icon-facebook facebook" aria-hidden="true"></i></a></li>
                        <li><a href="#!" data-toggle="tooltip" data-placement="bottom" title=""
                            data-original-title="twitter" data-abc="true"><i
                              class="mdi mdi-twitter feather icon-twitter twitter" aria-hidden="true"></i></a></li>
                        <li><a href="#!" data-toggle="tooltip" data-placement="bottom" title=""
                            data-original-title="instagram" data-abc="true"><i
                              class="mdi mdi-instagram feather icon-instagram instagram" aria-hidden="true"></i></a>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
        
      <div class="col-md-2">
      </div>
 
    </div>
    <div class="container mt-3" <% if (owner) { %>  hidden <% } %> >
      <hr>
        <!--da visualizzare solo se non si è proprietari -->
        <div class='row mb-3 d-flex justify-content-center'>
          <h1 class="text-center mb-3">Prenota uno slot:</h1>
          <div class='col-sm-2'>
            <label for='linkedPickers1Input' class='form-label'>Da:</label>
            <div class='input-group log-event' id='linkedPickers1' data-td-target-input='nearest'
              data-td-target-toggle='nearest'>
              <input id='linkedPickers1Input' type='text' class='form-control' data-td-target='#linkedPickers1'
                required />
              <span class='input-group-text' data-td-target='#linkedPickers1' data-td-toggle='datetimepicker'>
                <span class='fa-solid fa-calendar'></span>
              </span>
            </div>
          </div>
          <div class='col-sm-2'>
            <label for='linkedPickers2Input' class='form-label'>A:</label>
            <div class='input-group log-event' id='linkedPickers2' data-td-target-input='nearest'
              data-td-target-toggle='nearest'>
              <input id='linkedPickers2Input' type='text' class='form-control' data-td-target='#linkedPickers2'
                required />
              <span class='input-group-text' data-td-target='#linkedPickers2' data-td-toggle='datetimepicker'>
                <span class='fa-solid fa-calendar'></span>
              </span>
            </div>
          </div>
        </div>
    </div>
    <label id="message" class="text-danger d-block text-center"></label>
    <div class="px-4 py-5  text-center" <% if (owner) { %> hidden <% } %>>
        <div class="col-lg-6 mx-auto">
          <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
            <button type="button" class="btn btn-primary btn-lg px-4 gap-3"
              onclick="createReservation()">Prenota</button>
            <button class="btn btn-outline-primary" disabled>Pagamento in contanti</button>
          </div>
        </div>
        <p><br>Altre opzioni di pagamento coming soon™️</p>
    </div>

    <%- include("footer.ejs", {logged: logged}) %>
</body>